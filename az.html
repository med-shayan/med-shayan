<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <title>Aâ€“Z Ãœbersicht â€“ Medizinisches Lexikon</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
<div id="header"></div>

<!-- TITEL -->
<h1 class="lang de">Aâ€“Z Ãœbersicht</h1>
<h1 class="lang fa" dir="rtl">ÙÙ‡Ø±Ø³Øª Ø§Ù„ÙØ¨Ø§ÛŒÛŒ</h1>

<!-- BESCHREIBUNG -->
<p class="lang de">
  Alle medizinischen Fachbegriffe alphabetisch sortiert.
</p>

<p class="lang fa" dir="rtl">
  ØªÙ…Ø§Ù… Ø§ØµØ·Ù„Ø§Ø­Ø§Øª Ù¾Ø²Ø´Ú©ÛŒ Ø¨Ù‡ ØªØ±ØªÛŒØ¨ Ø­Ø±ÙˆÙ Ø§Ù„ÙØ¨Ø§ Ù…Ø±ØªØ¨ Ø´Ø¯Ù‡â€ŒØ§Ù†Ø¯.
</p>

<!-- LISTE -->
<div id="az-liste"></div>

<!-- ZURÃœCK -->
<p class="lang de">
  <a href="index.html">â† ZurÃ¼ck zur Startseite</a>
</p>

<p class="lang fa" dir="rtl">
  <a href="index.html">â† Ø¨Ø§Ø²Ú¯Ø´Øª Ø¨Ù‡ ØµÙØ­Ù‡ Ø§ØµÙ„ÛŒ</a>
</p>

<!-- BEGRIFFE -->
<script src="begriffe.js"></script>

<!-- LOGIK -->
<script>
function setLang(lang) {
  // Sprache speichern
  localStorage.setItem("lang", lang);

  // Texte ein/ausblenden
  document.querySelectorAll('.lang').forEach(el => {
    el.style.display = 'none';
  });
  document.querySelectorAll('.' + lang).forEach(el => {
    el.style.display = 'block';
  });

  // Liste neu aufbauen
  renderAZ(lang);
}

function renderAZ(lang) {
  const container = document.getElementById("az-liste");
  container.innerHTML = "";

  // sprachabhÃ¤ngig sortieren
  const sorted = [...begriffe].sort((a, b) => {
    const nameA = lang === "fa" ? a.name_fa : a.name_de;
    const nameB = lang === "fa" ? b.name_fa : b.name_de;
    const locale = lang === "fa" ? "fa" : "de";
    return nameA.localeCompare(nameB, locale);
  });

  let currentLetter = "";

  sorted.forEach(b => {
    const name = lang === "fa" ? b.name_fa : b.name_de;
    if (!name) return;

    const letter = name.charAt(0);

    if (letter !== currentLetter) {
      currentLetter = letter;
      const h2 = document.createElement("h2");
      h2.textContent = letter;
      container.appendChild(h2);
    }

    const p = document.createElement("p");
    p.innerHTML = `<a href="${b.file}">${name}</a>`;
    container.appendChild(p);
  });
}

// Beim Laden: gespeicherte Sprache nutzen
const savedLang = localStorage.getItem("lang") || "de";
setLang(savedLang);
</script>

<script>
fetch("header.html")
  .then(res => res.text())
  .then(html => {
    const header = document.getElementById("header");
    header.innerHTML = html;

    // ğŸ”’ Sprache SOFORT korrekt setzen
    const lang = localStorage.getItem("lang") || "de";

    header.querySelectorAll('.lang').forEach(el => {
      el.style.display = 'none';
    });
    header.querySelectorAll('.' + lang).forEach(el => {
      el.style.display = 'block';
    });
  });
</script>

<script>
fetch("footer.html")
  .then(response => response.text())
  .then(data => {
    document.getElementById("footer").innerHTML = data;

    // Sprache nachladen (wichtig!)
    const lang = localStorage.getItem("lang") || "de";
    document.querySelectorAll('#footer .lang').forEach(el => {
      el.style.display = 'none';
    });
    document.querySelectorAll('#footer .' + lang).forEach(el => {
      el.style.display = 'block';
    });
  });
</script>

<div id="footer"></div>
</body>
</html>
