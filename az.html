<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <title>Aâ€“Z Ãœbersicht â€“ Medizinisches Lexikon</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>

<!-- HEADER -->
<div id="header"></div>

<!-- CONTENT -->
<div class="container">

  <!-- TITEL -->
  <h1 class="lang de">Aâ€“Z Ãœbersicht</h1>
  <h1 class="lang fa" dir="rtl">ÙÙ‡Ø±Ø³Øª Ø§ØµØ·Ù„Ø§Ø­Ø§Øª Ù¾Ø²Ø´Ú©ÛŒ</h1>

  <!-- BESCHREIBUNG -->
  <p class="lang de">
    Alle medizinischen Fachbegriffe alphabetisch sortiert.
  </p>

  <p class="lang fa" dir="rtl">
    ØªÙ…Ø§Ù… Ø§ØµØ·Ù„Ø§Ø­Ø§Øª Ù¾Ø²Ø´Ú©ÛŒ Ø¨Ù‡ ØµÙˆØ±Øª ÙÙ‡Ø±Ø³Øª Ù…Ø±ØªØ¨â€ŒØ´Ø¯Ù‡ Ù†Ù…Ø§ÛŒØ´ Ø¯Ø§Ø¯Ù‡ Ø´Ø¯Ù‡â€ŒØ§Ù†Ø¯.
  </p>

  <!-- LISTE -->
  <div id="az-liste" class="az-list"></div>

  <!-- ZURÃœCK -->
  <p class="lang de">
    <a href="index.html">â† ZurÃ¼ck zur Startseite</a>
  </p>

  <p class="lang fa" dir="rtl">
    <a href="index.html">â† Ø¨Ø§Ø²Ú¯Ø´Øª Ø¨Ù‡ ØµÙØ­Ù‡ Ø§ØµÙ„ÛŒ</a>
  </p>

</div>

<!-- FOOTER -->
<div id="footer"></div>

<!-- DATEN -->
<script src="begriffe.js"></script>

<!-- LOGIK -->
<script>
function normalizeFa(text) {
  return text
    .replace(/ÙŠ/g, "ÛŒ")
    .replace(/Ùƒ/g, "Ú©")
    .replace(/\u200c/g, "")
    .trim();
}

function setLang(lang) {
  localStorage.setItem("lang", lang);

  document.querySelectorAll('.lang').forEach(el => {
    el.style.display = 'none';
  });
  document.querySelectorAll('.' + lang).forEach(el => {
    el.style.display = 'block';
  });

  renderAZ(lang);
}

function renderAZ(lang) {
  const container = document.getElementById("az-liste");
  container.innerHTML = "";

  const sorted = [...begriffe].sort((a, b) => {
    const nameA = lang === "fa" ? normalizeFa(a.name_fa) : a.name_de;
    const nameB = lang === "fa" ? normalizeFa(b.name_fa) : b.name_de;
    return nameA.localeCompare(nameB, lang === "fa" ? "fa" : "de");
  });

  // ğŸ”¤ DEUTSCH: mit Buchstaben
  if (lang === "de") {
    let currentLetter = "";

    sorted.forEach(b => {
      const name = b.name_de;
      if (!name) return;

      const letter = name.charAt(0).toUpperCase();

      if (letter !== currentLetter) {
        currentLetter = letter;
        const h2 = document.createElement("h2");
        h2.textContent = letter;
        container.appendChild(h2);
      }

      const p = document.createElement("p");
      p.innerHTML = `<a href="${b.file}">${name}</a>`;
      container.appendChild(p);
    });
  }

  // ğŸ‡®ğŸ‡· FARSI: einfache Liste (keine falschen Buchstaben)
  if (lang === "fa") {
    sorted.forEach(b => {
      const name = b.name_fa;
      if (!name) return;

      const p = document.createElement("p");
      p.innerHTML = `<a href="${b.file}">${name}</a>`;
      container.appendChild(p);
    });
  }
}
</script>

<!-- HEADER LADEN -->
<script>
fetch("header.html")
  .then(res => res.text())
  .then(html => {
    document.getElementById("header").innerHTML = html;
  });
</script>

<!-- FOOTER LADEN -->
<script>
fetch("footer.html")
  .then(res => res.text())
  .then(html => {
    document.getElementById("footer").innerHTML = html;
  });
</script>

<!-- STARTSPRACHE -->
<script>
const savedLang = localStorage.getItem("lang") || "de";
setLang(savedLang);
</script>

</body>
</html>
